<mat-grid-list cols="{{ columns$ | async }}" rowHeight="2:1" [gutterSize]="'16px'">
  @if (addCompanyClicked) {
    <mat-grid-tile class="button-title tw-flex" (click)="addCompanyClicked = !addCompanyClicked">
      <div class="plus-icon tw-flex-[40%] tw-flex tw-items-center tw-justify-center">
        <mat-icon>add_circle_outline</mat-icon>
      </div>
      <div class="tw-flex tw-items-center tw-flex-[60%]">
        <h3 class="text" i18n="Create company|Add a company">Create a company</h3>
      </div>
    </mat-grid-tile>
  } @else {
    <mat-grid-tile class="tw-flex tw-items-center tw-justify-center">
      <div class="upload-image-container tw-flex-[40%]">
        <app-image-upload [(previewSource)]="previewSource" [(fileSelected)]="fileSelected"></app-image-upload>
      </div>

      <div class="tw-flex tw-flex-col tw-flex-[60%] tw-p-6">
        <div class="tw-flex tw-flex-col tw-justify-between tw-flex-1">
          <mat-form-field class="createCompanyForm" appearance="fill">
            <input
              matInput
              [formControl]="companyNameControl"
              i18n-placeholder="Company name|Name of the company"
              placeholder="Company name"
            />
            <mat-error i18n="Company name required|Company name is required to create a company">
              Company name is required
            </mat-error>
          </mat-form-field>

          <div class="tw-self-end tw-flex tw-gap">
            <app-spinner-button
              [loadingState]="creationLoading"
              [label]="createLabel"
              (click)="createCompany()"
              class="tw-flex-1"
            ></app-spinner-button>
            <button
              type="button"
              mat-flat-button
              (click)="addCompanyClicked = !addCompanyClicked"
              class="tw-flex-1"
              i18n="Cancel|Cancel action"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>
    </mat-grid-tile>
  }

  @for (company of companies; track company) {
    <mat-grid-tile
      class="button-title tw-flex tw-items-start tw-justify-center"
      [routerLink]="['/companies/', company._id]"
    >
      <div class="tw-flex-[40%] tw-flex tw-items-center tw-justify-center">
        <company-avatar class="tw-p-4" [company]="company"></company-avatar>
      </div>

      <div class="tw-flex tw-flex-col tw-justify-center tw-items-center tw-flex-[60%]">
        <h3 class="ellipsis ellipsis2">{{ company.name }}</h3>

        @if (company?.notes && (displayNotes$ | async)) {
          <p class="tw-opacity-70 ellipsis ellipsis5">{{ company?.notes }}</p>
        }
      </div>
    </mat-grid-tile>
  }
</mat-grid-list>
